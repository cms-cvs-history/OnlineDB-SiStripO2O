process o2o = {

    service = MessageLogger {
	untracked vstring destinations = { "cout" }
	untracked PSet cout = { untracked string threshold = "DEBUG" }
	untracked vstring debugModules   = { "*" }
    }
    
    source = EmptyIOVSource {
	string timetype = "runnumber"
        untracked uint32 firstRun = 1
	untracked uint32 lastRun = 1
        uint32 interval = 1
    }

    untracked PSet maxEvents = {untracked int32 input = 1}
  

    include "OnlineDB/SiStripConfigDb/data/SiStripConfigDb.cfi"
    replace SiStripConfigDb.UsingDb         = true
    replace SiStripConfigDb.ConfDb          = "cms_tracker_tif2/stabletif2@cms_tec_lyon"
    replace SiStripConfigDb.Partitions.PrimaryPartition.PartitionName = "SliceTest_29032007"
    replace SiStripConfigDb.Partitions.PrimaryPartition.RunNumber =  8046
    

    service = SiStripCondObjBuilderFromDb{}

    //PopCon config
    include "CondCore/DBCommon/data/CondDBCommon.cfi"
    replace CondDBCommon.connect = "sqlite_file:/tmp/giordano/dbfile.db" 
    replace CondDBCommon.DBParameters.messageLevel=4
    
    service = PoolDBOutputService{
	using CondDBCommon
	untracked string timetype = "runnumber"    
	untracked string BlobStreamerName="TBufferBlobStreamingService"
	VPSet toPut={ 
	    { string record = "SiStripPedestalsRcd"  string tag = "SiStripPedestals_TIF_20X"} ,
	    { string record = "SiStripNoisesRcd"     string tag = "SiStripNoise_TIF_20X"} ,
	    { string record = "SiStripThresholdRcd"  string tag = "SiStripThreshold_TIF_20X"} ,
	    { string record = "SiStripBadStrip"      string tag = "SiStripBadChannel_TIF_20X"} ,
	    { string record = "SiStripFedCablingRcd" string tag = "SiStripFedCabling_TIF_20X"} 
	}
	untracked string logconnect = "sqlite_file:log.db"	
    }    
    
    block CommonSiStripPopConParams = {
	untracked bool loggingOn = True
	bool SinceAppendMode = true
	PSet Source ={
	    untracked uint32 since = 8046 
	    untracked bool debug = true
	}
    }

    module siStripPopConNoise = SiStripPopConNoise {
	string record = "SiStripNoisesRcd"
	using CommonSiStripPopConParams
    }

    module siStripPopConPedestals = SiStripPopConPedestals {
	string record = "SiStripPedestalsRcd"
	using CommonSiStripPopConParams
    }

    module siStripPopConThreshold = SiStripPopConThreshold {
	string record = "SiStripThresholdRcd"
	using CommonSiStripPopConParams
    }

    module siStripPopConFedCabling = SiStripPopConFedCabling {
	string record = "SiStripFedCablingRcd"
	using CommonSiStripPopConParams
    }

    module siStripPopConBadStrip = SiStripPopConBadStrip {
	string record = "SiStripBadStrip"
	using CommonSiStripPopConParams
    }

    path p = { 
	siStripPopConNoise      ,
	siStripPopConPedestals  ,
	siStripPopConThreshold  ,
	siStripPopConFedCabling ,
	siStripPopConBadStrip
    }
    
    module print = AsciiOutputModule {}
    endpath ep = { print }
}
