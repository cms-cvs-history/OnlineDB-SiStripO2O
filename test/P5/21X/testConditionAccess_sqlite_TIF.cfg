process Test = {
    
    untracked PSet maxEvents = {untracked int32 input = 1}
    
    source = EmptyIOVSource {
	string timetype = "runnumber"
	untracked uint32 firstRun = 7000
	untracked uint32 lastRun = 7000
        uint32 interval = 1
    }
    
    service = MessageLogger {
	untracked vstring destinations = { "testConditionAccess.log" }
	untracked PSet testConditionAccess.log = { untracked string threshold = "DEBUG" }
    	untracked vstring debugModules   = { "*" }
    }
    
    service = Timing {}
    
        
    ##############################
    # Strip 
    ##############################
    
    #
    ##Cabling
    #
    
    es_source siStripFedCabling = poolDBESSource from "CalibTracker/Configuration/data/Common/PoolDBESSource.cfi"
    replace siStripFedCabling.connect="sqlite_file:dbfile.db"
    replace siStripFedCabling.toGet = {{ string record = "SiStripFedCablingRcd"
	    string tag = "SiStripFedCabling_CRACK_21X_test1" }}
    replace siStripFedCabling.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"
    es_module sistripconn = SiStripConnectivity {}
    
    #
    ##Noise
    #
    es_source siStripNoise = poolDBESSource from "CalibTracker/Configuration/data/Common/PoolDBESSource.cfi"
    replace siStripNoise.connect="sqlite_file:dbfile.db"
    replace siStripNoise.toGet = {{ string record = "SiStripNoisesRcd"
	    string tag = "SiStripNoise_CRACK_21X_test1" }}
    replace siStripNoise.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"
    
    #
    ##Pedestals
    #
    es_source siStripPedestals = poolDBESSource from "CalibTracker/Configuration/data/Common/PoolDBESSource.cfi"
    replace siStripPedestals.connect="sqlite_file:dbfile.db"
    replace siStripPedestals.toGet = {{ string record = "SiStripPedestalsRcd"
	    string tag = "SiStripPedestals_CRACK_21X_test1" }}
    replace siStripPedestals.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    #
    #BadStrip
    #
    es_source siStripBadStrip = poolDBESSource from "CalibTracker/Configuration/data/Common/PoolDBESSource.cfi"
    replace siStripBadStrip.connect="sqlite_file:dbfile.db"
    replace siStripBadStrip.toGet = {{ string record = "SiStripBadStripRcd"
	    string tag = "SiStripBadChannel_CRACK_21X_test1" }}
    replace siStripBadStrip.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    #
    #
    ##Threshold
    #
    es_source siStripThreshold = poolDBESSource from "CalibTracker/Configuration/data/Common/PoolDBESSource.cfi"
    replace siStripThreshold.connect="sqlite_file:dbfile.db"
    replace siStripThreshold.toGet = {{ string record = "SiStripThresholdRcd"
	    string tag = "SiStripThreshold_CRACK_21X_test1" }}
    replace siStripThreshold.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"
    
    
    module badstrip  =  SiStripBadStripReader  {untracked uint32   printDebug = 2}
# #     #module modulehv  =  SiStripModuleHVReader  {untracked uint32   printDebug = 2}
# #     module gain      =  SiStripApvGainReader   {untracked uint32   printDebug = 2}
     module ped       =  SiStripPedestalsReader {untracked uint32   printDebug = 4}
     module noise     =  SiStripNoisesReader    {untracked uint32   printDebug = 4}
#     module threshold  =  SiStripThresholdReader    {untracked uint32   printDebug = 40000}
     module cabling   = test_AnalyzeCabling { }


    path p = {
 	cabling,
	badstrip , 	
 	ped,      
 	noise #, 
# 	threshold 
    }
    
    module print = AsciiOutputModule {}
    endpath ep = { print }
}
